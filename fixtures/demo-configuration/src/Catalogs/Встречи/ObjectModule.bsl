
Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)
	
	Пользователь = Неопределено;
	Если ТипЗнч(ДанныеЗаполнения) = Тип("Структура") Тогда
		ЗаполнитьЗначенияСвойств(ЭтотОбъект, ДанныеЗаполнения);
		
		Пользователь = ДанныеЗаполнения.Владелец;
		Если Пользователь = Неопределено Тогда
			Пользователь = ПользователиИнформационнойБазы.ТекущийПользователь();
		КонецЕсли;
		
	Иначе
		Пользователь = ПользователиИнформационнойБазы.ТекущийПользователь();
	КонецЕсли;
	
	Владелец = Справочники.Пользователи.НайтиПоКоду(Пользователь);
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если Владелец = Неопределено Тогда
		Пользователь = ПользователиИнформационнойБазы.ТекущийПользователь();
		Владелец = Справочники.Пользователи.НайтиПоКоду(Пользователь);
	КонецЕсли;
	
КонецПроцедуры

Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	Если НЕ УказанКорректныйПериод() Тогда
		Отказ = Истина;
	КонецЕсли;
	
КонецПроцедуры

Функция УказанКорректныйПериод()
	
	Успешно = Истина;
	
	Если Окончание < Начало Тогда
		Сообщение = Новый СообщениеПользователю();
		Сообщение.Текст = НСтр("ru = 'Дата окончания не может быть меньше даты начала.'", "ru");
		Сообщение.Поле  = "Окончание";
		Сообщение.УстановитьДанные(ЭтотОбъект);
		Сообщение.Сообщить();
		
		Успешно = Ложь;
		
	КонецЕсли;
	
	Возврат Успешно;
	
КонецФункции
